<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Password Generator</title>
    <style>
        :root {
            --bg1: #3a3795;
            --bg2: #2b2866;
            --card: #1f2340;
            --muted: #9aa0d6;
            --accent: #3b3fb0;
            --btn: #4b4fc2;
            font-family: "Segoe UI", Roboto, system-ui, Arial, sans-serif;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, var(--bg1), var(--bg2));
            color: #e8eaf6;
            padding: 30px;
        }

        .wrap {
            width: 420px;
            text-align: center;
        }

        h1 {
            margin: 0 0 16px;
            font-size: 22px;
            letter-spacing: 0.6px;
        }

        .outer-card {
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.14), rgba(0, 0, 0, 0.06));
            padding: 28px;
            border-radius: 8px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45), inset 0 6px 0 rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.04);
        }

        .output-row {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 12px;
        }

        .password-output {
            flex: 1;
            background: #14141f;
            color: #dfe6ff;
            border: 1px solid rgba(255, 255, 255, 0.06);
            padding: 10px 12px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }

        .copy-btn {
            background: var(--btn);
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 10px 12px;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
        }

        .controls {
            text-align: left;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 6px;
        }

        .control {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            color: var(--muted);
        }

        input[type="number"] {
            width: 80px;
            padding: 6px 8px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            background: #151420;
            color: #fff;
        }

        .checkbox {
            display: flex;
            gap: 8px;
            align-items: center;
            color: var(--muted);
            font-size: 14px;
        }

        .generate-btn {
            margin-top: 6px;
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            background: var(--accent);
            color: #fff;
            border: none;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 18px rgba(20, 20, 60, 0.45);
        }

        .msg {
            margin-top: 10px;
            min-height: 20px;
            font-size: 13px;
            color: #bfe3b4;
            text-align: left;
        }

        .note {
            margin-top: 14px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.85);
            text-align: left;
        }

        /* small responsive */
        @media (max-width:460px) {
            .wrap {
                width: 92%;
            }
        }
    </style>
</head>

<body>
    <div class="wrap" role="main">
        <h1>Password Generator</h1>

        <div class="outer-card" aria-label="Password generator card">
            <div class="output-row">
                <input id="passwordOutput" class="password-output" readonly placeholder="Your password will appear here"
                    aria-label="Generated password" />
                <button id="copyBtn" class="copy-btn" title="Copy password" aria-label="Copy password">ðŸ“‹</button>
            </div>

            <div class="controls">
                <label class="control" for="lengthInput">
                    <span>Password Length</span>
                    <input id="lengthInput" type="number" min="4" max="10" value="8" aria-describedby="lenNote" />
                </label>

                <label class="checkbox"><input id="upper" type="checkbox" checked /> Include uppercase letters</label>
                <label class="checkbox"><input id="lower" type="checkbox" checked /> Include lowercase letters</label>
                <label class="checkbox"><input id="numbers" type="checkbox" checked /> Include numbers</label>
                <label class="checkbox"><input id="symbols" type="checkbox" checked /> Include symbols</label>

                <button id="generateBtn" class="generate-btn">Generate Password</button>
            </div>

            <div id="msg" class="msg" aria-live="polite"></div>
            <div class="note" id="lenNote">Minimum length 4, maximum length 10. Copy uses
                <code>navigator.clipboard.writeText()</code>.
            </div>
        </div>
    </div>

    <script>
        // Character sets
        // Generate uppercase letters Aâ€“Z
        const UPPER = Array.from({ length: 26 }, (_, i) => String.fromCharCode(65 + i)).join('');

        // Generate lowercase letters aâ€“z
        const LOWER = Array.from({ length: 26 }, (_, i) => String.fromCharCode(97 + i)).join('');

        // Generate digits 0â€“9
        const NUMBERS = Array.from({ length: 10 }, (_, i) => i).join('');

        // Manually defined symbols (since theyâ€™re irregular)
        const SYMBOLS = "!@#$%^&*()_+-=[]{}|;:'\",.<>/?`~";


        // Elements
        const passwordOutput = document.getElementById("passwordOutput");
        const lengthInput = document.getElementById("lengthInput");
        const upperCB = document.getElementById("upper");
        const lowerCB = document.getElementById("lower");
        const numbersCB = document.getElementById("numbers");
        const symbolsCB = document.getElementById("symbols");
        const generateBtn = document.getElementById("generateBtn");
        const copyBtn = document.getElementById("copyBtn");
        const msg = document.getElementById("msg");

        // Ensure length stays within [4,10]
        lengthInput.addEventListener("change", () => {
            let v = parseInt(lengthInput.value, 10) || 4;
            if (v < 4) v = 4;
            if (v > 10) v = 10;
            lengthInput.value = v;
        });

        // Build pool from selected options
        function buildPool() {
            let pool = "";
            if (upperCB.checked) pool += UPPER;
            if (lowerCB.checked) pool += LOWER;
            if (numbersCB.checked) pool += NUMBERS;
            if (symbolsCB.checked) pool += SYMBOLS;
            return pool;
        }

        // Secure-ish random integer [0, max)
        function randInt(max) {
            if (window.crypto && window.crypto.getRandomValues) {
                const arr = new Uint32Array(1);
                window.crypto.getRandomValues(arr);
                return arr[0] % max;
            }
            return Math.floor(Math.random() * max);
        }

        // Generate password (ensures at least one char from each selected type)
        function generatePassword() {
            const length = Math.max(4, Math.min(10, parseInt(lengthInput.value, 10) || 8));
            const pool = buildPool();
            if (!pool) {
                showMessage("Please select at least one character type.", true);
                return;
            }

            const selectedPools = [];
            if (upperCB.checked) selectedPools.push(UPPER);
            if (lowerCB.checked) selectedPools.push(LOWER);
            if (numbersCB.checked) selectedPools.push(NUMBERS);
            if (symbolsCB.checked) selectedPools.push(SYMBOLS);

            let chars = [];

            // Guarantee one char from each chosen type (if length allows)
            for (let p of selectedPools) {
                chars.push(p[randInt(p.length)]);
            }

            // Fill remaining
            for (let i = chars.length; i < length; i++) {
                chars.push(pool[randInt(pool.length)]);
            }

            // Shuffle (Fisher-Yates)
            for (let i = chars.length - 1; i > 0; i--) {
                const j = randInt(i + 1);
                [chars[i], chars[j]] = [chars[j], chars[i]];
            }

            const password = chars.join("");
            passwordOutput.value = password;
            showMessage("Password generated.", false);
        }

        async function copyPassword() {
            const pwd = passwordOutput.value;
            if (!pwd) {
                showMessage("Nothing to copy â€” generate a password first.", true);
                return;
            }
            if (!navigator.clipboard || !navigator.clipboard.writeText) {
                // fallback
                passwordOutput.select();
                try {
                    if (document.execCommand && document.execCommand("copy")) {
                        showMessage("Copied to clipboard (fallback).", false);
                    } else {
                        showMessage("Copy failed in fallback mode.", true);
                    }
                } catch (err) {
                    showMessage("Copy not supported in this browser.", true);
                }
                return;
            }
            try {
                await navigator.clipboard.writeText(pwd);
                showMessage("Copied to clipboard.", false);
            } catch (err) {
                showMessage("Failed to copy to clipboard.", true);
            }
        }

        function showMessage(text, isError = false) {
            msg.textContent = text;
            msg.style.color = isError ? "#ffb4b4" : "#bfe3b4";
            setTimeout(() => { if (msg.textContent === text) msg.textContent = ""; }, 3200);
        }

        generateBtn.addEventListener("click", generatePassword);
        copyBtn.addEventListener("click", copyPassword);

        // allow Enter on length input
        lengthInput.addEventListener("keydown", (e) => { if (e.key === "Enter") generatePassword(); });
    </script>
</body>

</html>